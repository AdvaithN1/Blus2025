<!DOCTYPE html>
<html>
<head>
    <!-- Google tag (gtag.js) -->
	<!-- <script async src="https://www.googletagmanager.com/gtag/js?id=G-PR3N3PDHFV"></script> -->
	<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());

	gtag('config', 'G-PR3N3PDHFV');
	</script>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='/css/videoport.css'>
    <link rel="icon" type="image/svg+xml" href="/assets/PantheonMEETSfavicon.svg" size="128x128">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"
      integrity="sha512-7eHRwcbYkK4d9g/6tD/mhkf++eoTHwpNM9woBxtPUBWm67zeAfFC+HrdoE2GanKeocly/VxeLvIqwvCdk7qScg=="
      crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/CSSRulePlugin.min.js"
      integrity="sha512-IxxYrSNXnt/RJlxNX40+7BQL88FLqvdpVpuV9AuvpNH/NFP0L8xA8WLxWTXx6PYExB5R/ktQisp6tIrnLn8xvw=="
      crossorigin="anonymous" referrerpolicy="no-referrer"></script>

      <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
      <script src="https://unpkg.com/gsap@3/dist/ScrollTrigger.min.js"></script>
      <script src="https://unpkg.co/gsap@3/dist/gsap.min.js"></script>

    <script src="/js/bootstrap/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="/js/bootstrap/css/bootstrap.min.css">
</head>

<body>
    <title>PantheonMEETS - In a meeting</title>

    <!-- Toast container -->
    <div aria-live="polite" aria-atomic="true" style="position: absolute; min-height: 200px; z-index: 99999;">
        <!-- Position it -->
        <div style="position: absolute; top: 0; left: 0;", id="add-toasts-here">
      
          <!-- <div class="toast" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-header">
              <img src="..." class="rounded mr-2" alt="...">
              <strong class="mr-auto">Bootstrap</strong>
              <small class="text-muted">2 seconds ago</small>
              <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="toast-body">
              Heads up, toasts will stack automatically
            </div>
          </div> -->
        </div>
      </div>


    <!--
        
    
    <div id="login-form">
        <h2>Loading... (Don't enter anything)</h2>
        <input type="text" id="username" placeholder="Username" required>
        <!- <input type="text" id="meetingId" placeholder="Meeting ID" required> ->
        <button id="join-meeting-btn">Join</button>
    </div>-->
    <audio id="audioPlayer" src="../callJoin.mp3" style="display: none;"></audio>
    <audio id="audioPlayerLeave" src="../leavemet.mp3" style="display: none;"></audio>


    <div id="stream-wrapper">
        <!-- <button id="join-btn">Join Stream</button> -->
        <div id="video-streams"></div>

        <div id="stream-controls" class="buttons">
            <button id="leave-btn"></button>
            <button id="mic-btn" class="anim-mic"></button>
            <button id="camera-btn"></button>
            <button id="screenshare-btn"></button>
            <button id="whiteboard-btn"></button>
            <button id="erase-btn"></button>
            <button id="save-btn"></button> <!-- SEND SIGNATURE -->
            <button id="transfer-btn"></button> <!-- TRANSFER MONEY -->
            <label for="upload-btn" id="custom-upload-btn"></label>
            <input type="file" accept="image/*" id="upload-btn"> <!-- OVERLAYS IMAGE -->
            <span id="file-name"></span>

            
        </div>
    </div>

    
    <div id="captions-column">

        <div id="captionTitle">Chat</div>

        <select name="Select Language" id="language" class="lang">
            <option value="1">English</option>
            <option value="2">Spanish</option>
            <option value="3">French</option>
            <option value="4">Chinese</option>
            <option value="5">Arabic</option>
            
        </select>

        <div class="capContainer2">
            <div class="capContainer">
                <div id="captions"></div>
            </div>
            <div class="chatboxContainer">
            <input id="chatbox" placeholder="Message the meeting..."/>
            </div>

            
            <script>
                const usernameInput = document.getElementById('username');
                const btn = document.getElementById('join-meeting-btn');

                const lan = document.getElementById('language');
                const capsT = document.getElementById('captionTitle');
                const chat = document.getElementById('chatbox');
                
                /*
                btn.addEventListener("click", function() {
                    console.log("-" + usernameInput + "-");
                    if ((usernameInput.value.trim() == "") == false) { // Checks if button is pressed and username is valid (not empty)
                        lan.style.opacity = '1';
                        capsT.style.opacity = '1';
                        chat.style.opacity = '1';
                    }
                    
                });*/


            </script>

            <script>
                const scrollCaps = document.getElementsByClassName("capContainer2");

                const currentPosition = captionsContainer.scrollTop;    
                console.error("CURRENT POSITION: "+ currentPosition);

                while (true) {
                    for (const scrollCap of scrollCaps) {        
                        scrollCap.scroll(0, scrollCap.scrollHeight);    
                    }
                }
                
            </script>
            <script>
                 const textInput = document.getElementById('chatbox');
                 textInput.addEventListener('keydown', (event) => {
                    if (event.key === 'Enter') {
                        updateCaptions(textInput.value);
                        textInput.value = "";
                    }
                    });
            </script>
        </div>

        <script>
            import gsap from "gsap";
    
            $(window).on("load", function () {
                const tl = gsap.timeline({});

                tl.to('#login-form', {y: '-=100px', ease: "expo.out", duration: 1.0}, "-=1.0");
            });
        </script>


        

        
    </div> 

    <script src="/js/toast.js"></script>

    <!-- <div id="captions" class="captions-container"></div>  -->
    <!-- <script src="https://download.agora.io/sdk/release/AgoraRTC_N.js"></script> -->
    <script src="/js/AgoraRTC_N-4.20.2.js"></script>
    <!-- <script src="./js/agora-rtm.js"></script> -->
    <script src="/js/agora-rtm-sdk/agora-rtm.min.js"></script>
 
    <!-- MEDIAPIPE STUFF -->

    <!-- <link href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css" rel="stylesheet"> -->
    <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js" ></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js" crossorigin="anonymous" ></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js" crossorigin="anonymous" ></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.3/vision_bundle.mjs" crossorigin="anonymous"></script>

    <!-- <script type="module" src="/js/tasks-vision/vision_bundle.mjs"></script> -->
    
    <script src="https://js.pusher.com/8.2.0/pusher.min.js"></script>


    <script src='/js/main.js' defer></script>
    <script>
        $(document).ready(function () {
            $('.toast').toast('show'); // This will show all toasts on page load
        });
    </script>

</body>
    

</html>